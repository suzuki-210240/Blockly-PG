{%load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Blockly Test</title>
        <!-- Load Blockly core -->
        <script src="https://unpkg.com/blockly/blockly_compressed.js"></script>
        <!-- Load the default blocks -->
        <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
        <!-- Load a generator -->
        <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
        <!-- Load a message file -->
        <script src="https://unpkg.com/blockly/msg/ja.js"></script>
        <script src="https://unpkg.com/blockly/python_compressed"></script>
        <script src="https://unpkg.com/blockly/blockly.min.js"></script>
        <script>
            const csrfToken = "{{ csrf_token }}"; // Djangoが生成したCSRFトークンを取得
        </script>
    <link rel="stylesheet" type="text/css" href="{%static 'css/Block_style.css' %}">

</head>
<body>
    <header>
        <p class="logo">BlocklyCodeAcademy</p>
        <div class="file">
            <!-- 保存ボタン -->
            <button onclick="saveWorkspaceAsXML()">ワークスペースを保存</button>
            
            <!-- XML ファイルを読み込むボタン -->
            <input type="file" id="uploadFile" onchange="loadWorkspaceFromXML(event)" />
        </div>
        <div class="selectdiv">
            <label>
              <select>
                <option selected>ユーザー名</option>
                <option>設定</option>
                <option>アカウント管理</option>
                <option>ログアウト</option>
              </select>
            </label>
        </div>
    </header>
    <div class = "main">
        <h3 id="name">・問題{{ number }}</h3>
        
        <div class="field">
            <div id="blocklyDiv"></div>

            <!--コードを表示するエリア-->
            <div class = "sub_field">
                <h4>問題文</h4>
                <textarea id="exampleOutput" rows="10" cols="50" disabled>{{ message }}</textarea>
            
                <!--出力結果を表示するエリア-->
            
                <h4>出力結果</h4>
                <textarea id="output" rows="10" cols="50" disabled></textarea>
                
                <div class="button_area">
                    <!-- 実行ボタン -->
                    <button onclick="runCode()">実行</button>

                    <!--組んだブロックのコード変換と送信-->
                    <button id="generateCodeButton" onclick="generateCode()">解答を送信</button>
                </div>
            </div>
        </div>
    </div>
</body>
    <script type="text/javascript" src="{% static 'js/src.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/Block.js' %}"></script>
    
</html>
